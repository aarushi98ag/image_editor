<html>
<head>
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="./jquery.imgareaselect-0.9.10/css/imgareaselect-animated.css">
<link rel="stylesheet"  href="./lightslider-master/src/css/lightslider.css"/>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script src="./cloudinary/cloudinary_js-master/js/jquery.cloudinary.js"></script>
<script src="./jquery.imgareaselect-0.9.10/scripts/jquery.imgareaselect.min.js"></script>
<script src="./jquery.imgareaselect-0.9.10/scripts/jquery.imgareaselect.pack.js"></script>
<script src="./lightslider-master/src/js/lightslider.js"></script> 
 

<style>
	/*	img 
		{
		    display: block;
		    margin-left: auto;
		    margin-right: auto;
		}*/

		ul {
			display: block;
		    list-style-type: none;
		    padding-left: 300;
		    padding-top: 30;
            margin: 10;
		    overflow: hidden; 


		}

		li {
		    float: left;

		}

		li button {
		    /*display: block;*/
		    color: white;
		    text-align: center;
		    padding: 0px 0px;
		    text-decoration: none;
		    border-width: 0;
		    margin-right: 80px
		}

		li button:hover {
		    background-color: #111;
		}

		.column {
		  float: left;
		  width: 33.33%;
		  padding: 10px;

		}

		/* Clear floats after image containers */
		.row::after {
		  content: "";
		  clear: both;
		  display: table;
		  
		}


		.demo .item{
            margin-bottom: 60px;
        }
		.content-slider li{
		    background-color: #ed3020;
		    text-align: center;
		    color: #FFF;
		}
		.content-slider h3 {
		    /*margin: 0;*/
		    padding: 0px 0;
		}
		.demo{
			width: auto;
			/*margin: 200px;*/
			display: block;
			text-align: center;
		}

		 
</style>

</head>

<body>
 
<!-- <script type="text/javascript">

	$.cloudinary.config({ 
		  cloud_name: 'diukn5sr6', 
		  api_key: '335317579573276', 
		  api_secret: 'phSrYWbXf_TNYDToLyqzptrnU88' 
		});	

	$.cloudinary.image("http://mdb.ibcdn.com/665f4c54621811e6890f40f2e9694aa0.jfif", {type: "fetch"});


</script> -->


<script>

		

    	$(document).ready(function() {
			// $("#content-slider").lightSlider({
   //              loop:true,
   //              keyPress:true
   //          });

            var slider = $('#image-gallery').lightSlider({
                gallery:true,
                item:1,
                thumbItem:8,
                slideMargin: 0,
                speed:500,
                // auto:true,
                loop:false,
                keyPress:true,
                adaptiveHeight: false,
                onSliderLoad: function() {
                	
                	var num = 1;
    				image_id = num.toString();
    				getURl(imgArray[(slider.getCurrentSlideCount() - 1)].src); 
                    $('#image-gallery').removeClass('cS-hidden');
                    
                },
                onAfterSlide: function()
                {
                	image_id = (slider.getCurrentSlideCount()).toString();
                	getURl(imgArray[(slider.getCurrentSlideCount() - 1)].src); 
                	//alert(typeof(image_id));
                	//alert(document.getElementById("2").src);
                }  
            });

            // $('#getCurrentSlideCount').click(function(){
            //     getURl(imgArray[(slider.getCurrentSlideCount() - 1)].src); 
            // });
		});

</script>


<!-- <h1 align ="center" style="font size:100px" style="font-family:courier;"> Image Editor </h1> -->
 
 
<ul>
<li><button id="button1" ><img src="./icons/rotate_left.jpg" ></button></li>
<li><button id="button2" ><img src="./icons/rotate_right.000.jpg" ></button></li>
<li><button id="button3" ><img src="./icons/Crop.2.513.jpg" ></button></li>
<li><button id="button4" ><img src="./icons/Status_check_mark_yes_circle.04.512.jpg" ></button></li>
<li><button id="button5" ><img src="./icons/Status_check_mark_no.512.jpg" ></button></li>
<li><button id="button6" ><img src="./icons/undo.000.jpg" ></button></li>
 
</ul>
 

<script type="text/javascript">
	



</script>


<div class="demo">
        <div class="item">            
            <div class="clearfix">
                <ul id="image-gallery" class="gallery list-unstyled cS-hidden">
                    <!-- <li data-thumb="image.jpg"> 
                        <img src="image.jpg" />


                         </li> -->

  <!--                    <li data-thumb="http://res.cloudinary.com/diukn5sr6/image/upload/domokun.jpg"> 
                        <img src="http://res.cloudinary.com/diukn5sr6/image/upload/domokun.jpg" id="1">
                         </li>

                    <li data-thumb="http://mdb.ibcdn.com/665f4c54621811e6890f40f2e9694aa0.jfif"> 
                        <img src="http://mdb.ibcdn.com/665f4c54621811e6890f40f2e9694aa0.jfif" id="2">
                         </li>

                     <li data-thumb="http://res.cloudinary.com/diukn5sr6/image/upload/domokun.jpg"> 
                        <img src="http://res.cloudinary.com/diukn5sr6/image/upload/domokun.jpg" id="3">
                         </li>

 -->

                 <!--    <li data-thumb="http://upload.wikimedia.org/wikipedia/commons/4/46/Jennifer_Lawrence_at_the_83rd_Academy_Awards.jpg"> 
                        <img src="http://upload.wikimedia.org/wikipedia/commons/4/46/Jennifer_Lawrence_at_the_83rd_Academy_Awards.jpg" />
                         </li> -->
                   <!--  <li data-thumb="image.jpg"> 
                        <img src="image.jpg" />
                         </li> -->
                   
                    <!-- <li data-thumb="domokun.jpg"> 
                        <img src="domokun.jpg" />
                         </li>
                    <li data-thumb="image.jpg"> 
                        <img src="image.jpg" />
                         </li>
                    <li data-thumb="image.png"> 
                        <img src="image.png" />
                         </li> -->
                </ul>
            </div>
	    </div>        
</div>	

  
 


 

<div class="row" id="parent">

</div>



<script type="text/javascript">
	

	var cloud ;
	var string;	
	var prev_string;
	var string_img;

	var width;
	var height;
	var x1;
	var y1;
 	
 	var counter = 0;


 	var count = 1;
	var id;

	var image_id;

	function create_thumbnail(src)
	{
		var li = document.createElement("li");

		id  = count.toString();
		li.setAttribute("data-thumb",src);

		let x = document.createElement("IMG");
	    x.setAttribute("src", src);
	    x.setAttribute("id", id);

	 	li.appendChild(x);

	 	document.getElementById("image-gallery").appendChild(li);
	   	
	   	count = count +1;
	    
	    bind(id);
	}

	function bind(id)
	{
		let str = "#" + id;
		$(str).bind('click',function() {clickimage(id)});
	}

	 

	function set_credentials(cloud_name, api_key, api_secret)
	{
		$.cloudinary.config({ 
		  cloud_name: cloud_name, 
		  api_key: api_key, 
		  api_secret: api_secret 
		});	

		cloud = cloud_name;

	}


	function getURl(parameter1)
	{
			document.getElementById(image_id).src = parameter1;
			//  imp line----->	$.cloudinary.image(parameter1, {type: "fetch"});
			string = "http://res.cloudinary.com/" + cloud + "/image/fetch/";
			prev_string = string;
			// var split = parameter1.split("/");
			// string_img = split[split.length - 1];

			string_img = parameter1;
			 
			 
	}


	function rotateleft() 	 
	{
	 	if(counter == 0)
	 	{
		 	prev_string = string ;
		 	string = string + "a_"+ 270 +"/" ;
		 	 
		 	document.getElementById(image_id).src =  string + string_img;

		 	var num = parseInt(image_id);
		 	imgArray[num-1].src = document.getElementById(image_id).src ;
		 	 
		// 	alert(document.getElementById(image_id).src);
		}
	}


	function rotateright() 	 
	{
	 	if(counter == 0)
	 	{
		 	prev_string = string ;
		 	string = string + "a_"+ 90 +"/" ;
		 	document.getElementById(image_id).src = string + string_img;
		 	//angle = angle + 90 ;
		 	//  $.cloudinary.image("domokun.jpg" , {angle:270});

		 	var num = parseInt(image_id);
		 	imgArray[num-1].src = document.getElementById(image_id).src ;
	 	}
	}

	function crop() 	 
	{
	 	 $("#"+image_id).imgAreaSelect({
        	handles: true,
        	onSelectEnd: function (img, selection) 
        	{
        		//alert('topleftx: ' + selection.x1 + '; toplefty1: ' + selection.y1 + '; bottomrightx: ' + selection.x2 +'; bottomrighty: ' + selection.y2);
        		counter = 1;
        		width = selection.x2 - selection.x1;
        		height = selection.y2 - selection.y1;
        		x1 = selection.x1;
        		y1 = selection.y1;   

        		     		 
        		
   			}

   		 });
	}


	function accept() 	 
	{
	 	if(counter == 1)
	 	{
		 	$('#'+image_id).imgAreaSelect({remove:true});
		 	prev_string = string ;		 	 
		 	string =  string + "x_"+ x1 + ",y_"+ y1+",w_"+width+",h_"+height+",c_crop/";
		 	document.getElementById(image_id).src = string + string_img;
		 	counter = 0;

		 	var num = parseInt(image_id);
		 	imgArray[num-1].src = document.getElementById(image_id).src ;

		 	 

		}
        		

   	}

   	function cancel() 	 
	{
	 	counter = 0;
	 	$('#'+image_id).imgAreaSelect({remove:true});	 		
        		
   	}

   	function undo() 	 
	{
	 	if(counter==0)
	 	{
		 	document.getElementById(image_id).src = prev_string + string_img;	
		 	string = prev_string;
		 	var num = parseInt(image_id);
		 	imgArray[num-1].src = document.getElementById(image_id).src ;        		
        }
   	}


</script>

<script type="text/javascript">

	
	// create_thumbnail("image.png");	
	// create_thumbnail("image.jpg");
	// create_thumbnail("domokun.jpg");
	

	// create_thumbnail("http://res.cloudinary.com/diukn5sr6/image/upload/domokun.jpg");
	// create_thumbnail("http://mdb.ibcdn.com/665f4c54621811e6890f40f2e9694aa0.jfif");
	// create_thumbnail("http://res.cloudinary.com/diukn5sr6/image/upload/domokun.jpg");

	var imgArray = new Array();
		
		 

		for(i=0; i<9 ;i++)
		{
			imgArray[i] = new Image();

			if(i%2==0)
			{
				var src = 'http://res.cloudinary.com/diukn5sr6/image/upload/domokun.jpg';
				imgArray[i].src = src ;
				create_thumbnail(src) ;

			}

			else
			{
				var src = 'http://mdb.ibcdn.com/665f4c54621811e6890f40f2e9694aa0.jfif';	
				imgArray[i].src = src ;
				create_thumbnail(src) ;
			}

		}



 	
	set_credentials('diukn5sr6', '335317579573276', 'phSrYWbXf_TNYDToLyqzptrnU88');
	//getURl("http://mdb.ibcdn.com/665f4c54621811e6890f40f2e9694aa0.jfif");


	document.getElementById("button1").onclick = function() {rotateleft()}; 	 //var angle = 0 ;	 
	document.getElementById("button2").onclick = function() {rotateright()};	
	document.getElementById("button3").onclick = function() {crop()};
	document.getElementById("button4").onclick = function() {accept()};
	document.getElementById("button5").onclick = function() {cancel()};
	document.getElementById("button6").onclick = function() {undo()};

	 // document.getElementById("target").src = "http://res.cloudinary.com/diukn5sr6/image/upload/domokun.jpg"; 
	 // var string = "http://res.cloudinary.com/diukn5sr6/image/upload/" ;
	 // var prev_string = string ;


	

</script>

</body>